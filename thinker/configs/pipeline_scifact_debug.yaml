# Debug-friendly pipeline config pointing at reduced datasets/hyperparams.
tests:
  path: ../../cns-support-models/tests
  markers: "not slow"
  args: ["-v"]
  enabled: true

data_validation:
  path: ../../cns-support-models/tests/fixtures/scifact_dataset_sample.jsonl
  max_examples: 100
  schema:
    - name: prompt
      type: string
    - name: completion
      type: string
  evidence_mode: exact
  claims_json: ../../cns-support-models/tests/fixtures/scifact_claims_sample.jsonl
  corpus_json: ../../cns-support-models/tests/fixtures/scifact_corpus_sample.jsonl
  relation_field: completion
  require_relations: true

training:
  config_path: lora_config_debug.yaml
  backend: hf_peft
  enabled: true
  tinker_config_path: ../../cns-support-models/configs/claim_extractor_scifact_debug.yaml
  tinker_script: ../../cns-support-models/scripts/train_claim_extractor.py
  log_dir: ../../runs

evaluation:
  backend: tinker
  base_model: "meta-llama/Llama-3.1-8B-Instruct"
  checkpoint_dir:
  claims_file: ../../cns-support-models/tests/fixtures/scifact_claims_sample.jsonl
  corpus_file: ../../cns-support-models/tests/fixtures/scifact_corpus_sample.jsonl
  output_path: ../../runs/debug_eval.jsonl
  max_samples: 2
  enabled: true
  tinker_manifest_path: ../../runs/latest_tinker_adapter.json
  tinker_max_tokens: 128
  tinker_temperature: 0.0
